!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("axios")):"function"==typeof define&&define.amd?define(["exports","axios"],e):e((t=t||self).petfinder={},t.axios)}(this,function(t,n){"use strict";n=n&&n.hasOwnProperty("default")?n.default:n;var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function e(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function i(o,s,u,a){return new(u=u||Promise)(function(t,e){function n(t){try{i(a.next(t))}catch(t){e(t)}}function r(t){try{i(a.throw(t))}catch(t){e(t)}}function i(e){e.done?t(e.value):new u(function(t){t(e.value)}).then(n,r)}i((a=a.apply(o,s||[])).next())})}function o(n,r){var i,o,s,t,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,o&&(s=2&e[0]?o.return:e[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,e[1])).done)return s;switch(o=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return u.label++,{value:e[1],done:!1};case 5:u.label++,o=e[1],e=[0];continue;case 7:e=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){u=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){u.label=e[1];break}if(6===e[0]&&u.label<s[1]){u.label=s[1],s=e;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(e);break}s[2]&&u.ops.pop(),u.trys.pop();continue}e=r.call(n,u)}catch(t){e=[6,t],o=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}var s=(u.prototype.ensureAuthenticated=function(){return i(this,void 0,Promise,function(){return o(this,function(t){switch(t.label){case 0:return"Authorization"in this.http.defaults.headers.common?[3,2]:[4,this.client.authenticate()];case 1:t.sent(),t.label=2;case 2:return[2]}})})},u);function u(t){this.client=t,this.http=t.http}var a,c=(e(h,a=s),h.prototype.search=function(e){return void 0===e&&(e={}),i(this,void 0,Promise,function(){return o(this,function(t){switch(t.label){case 0:return[4,this.ensureAuthenticated()];case 1:return t.sent(),[2,this.http.get("/animals",{params:e})]}})})},h.prototype.show=function(e){return i(this,void 0,Promise,function(){return o(this,function(t){switch(t.label){case 0:return[4,this.ensureAuthenticated()];case 1:return t.sent(),[2,this.http.get("/animals/"+e)]}})})},h);function h(){return null!==a&&a.apply(this,arguments)||this}var p,l=(e(f,p=s),f.prototype.types=function(){return i(this,void 0,Promise,function(){return o(this,function(t){switch(t.label){case 0:return[4,this.ensureAuthenticated()];case 1:return t.sent(),[2,this.http.get("/types")]}})})},f.prototype.type=function(e){return i(this,void 0,Promise,function(){return o(this,function(t){switch(t.label){case 0:return[4,this.ensureAuthenticated()];case 1:return t.sent(),[2,this.http.get("/types/"+e)]}})})},f.prototype.breeds=function(e){return i(this,void 0,Promise,function(){return o(this,function(t){switch(t.label){case 0:return[4,this.ensureAuthenticated()];case 1:return t.sent(),[2,this.http.get("/types/"+e+"/breeds")]}})})},f);function f(){return null!==p&&p.apply(this,arguments)||this}var d,y=(e(b,d=s),b.prototype.search=function(e){return void 0===e&&(e={}),i(this,void 0,Promise,function(){return o(this,function(t){switch(t.label){case 0:return[4,this.ensureAuthenticated()];case 1:return t.sent(),[2,this.http.get("/organizations",{params:e})]}})})},b.prototype.show=function(e){return i(this,void 0,Promise,function(){return o(this,function(t){switch(t.label){case 0:return[4,this.ensureAuthenticated()];case 1:return t.sent(),[2,this.http.get("/organizations/"+e)]}})})},b);function b(){return null!==d&&d.apply(this,arguments)||this}var m,v=(e(w,m=Error),w);function w(t,e){var n=m.call(this,e.data.title)||this;return n.request=t,n.response=e,n.type=e.data.type,n.status=e.data.status,n.details=e.data.detail,n.invalidParams=e.data["invalid-params"],Object.setPrototypeOf(n,w.prototype),n}var g=(Object.defineProperty(P.prototype,"animalData",{get:function(){return new l(this)},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"animal",{get:function(){return new c(this)},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"organization",{get:function(){return new y(this)},enumerable:!0,configurable:!0}),P.prototype.authenticate=function(r){return i(this,void 0,Promise,function(){var e,n;return o(this,function(t){switch(t.label){case 0:return(n=r||this.config.token)?[3,2]:[4,this.http.post("/oauth2/token",{client_id:this.config.apiKey,client_secret:this.config.secret,grant_type:"client_credentials"})];case 1:e=t.sent(),n=e.data.access_token,t.label=2;case 2:return this.config.token=n,this.http.defaults.headers.common.Authorization="Bearer "+n,[2,e]}})})},P.prototype.isProblemDetailsResponse=function(t){return((t.headers||{})["content-type"]||"").includes("application/problem+json")},P);function P(t){var e=this;this.config=t,this.http=n.create({baseURL:t.baseUrl||"https://api.petfinder.com/v2",headers:{"x-api-sdk":"petfinder-js-sdk/v1.0 (https://github.com/petfinder-com/petfinder-js-sdk)"}}),this.http.interceptors.response.use(function(t){return t},function(t){return t.response&&e.isProblemDetailsResponse(t.response)?Promise.reject(new v(t.request,t.response)):Promise.reject(t)})}t.Client=g,Object.defineProperty(t,"__esModule",{value:!0})});
